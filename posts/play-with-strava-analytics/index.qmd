---
title: "Export and play with Strava analytics data"
author: "VB"
date: "2024-06-29"
categories: [analytics, python, running, strava, marathon, hugging face]
---

This is just a fun exercise to export all the data from Strava over to a dataset so that I can create fun views and charts on top.

Pre-requisites:
1. Create an API application: https://www.strava.com/settings/api in your strava account (set `localhost` as the website and other details)
2. Set API keys as Environment variables `STRAVA_CLIENT_ID` & `STRAVA_CLIENT_SECRET`

you can set the env variables simply by `export STRAVA_CLIENT_ID=...` & `export STRAVA_CLIENT_SECRET=...`

Setup the env and scraper:

1. Clone the github repository via: `git clone https://github.com/Vaibhavs10/strava-analyse.git`
2. Setup the python env with `uv`: `uv venv --python 3.12`, followed by, `source .venv/bin/activate`
3. Install all required packages via `uv pip install requests huggingface_hub`
4. Run `huggingface-cli login` (required to upload the dataset to Hugging Face)
5. Run the python script and follow the instructions: `python upload-strava-to-hf.py`

Note: when you run the script you'll be prompted to authorise access to your strava App. Once you click Authorise it'll redirect you too a page that doesn't exist ðŸ‘€.
Don't worry about it and look at the URL it is trying to redirect too, it should look something like `http://localhost:8000/?state=&code=e55c038bcf96ea6deff15c68649afc9554e6fbd6&scope=read,activity:read_all,profile:read_all`
The thing that matters to us is the string after `code`, just copy and paste it to the script and that's it! 

If all goes well, you should be able to go to your dataset on Hugging Face, here's mine for example: https://huggingface.co/datasets/reach-vb/strava-stats

<Image of the dataset>

With the Hugging Face dataset comes a lot of interesting possiblilities to identify trends using SQL or even pandas. Since the dataset is small we can just run SQL queries via DataStudio.

Let's crunch some numbers:


Now go ahead and play with it and let me know how it goes.
